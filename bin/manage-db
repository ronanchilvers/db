#!/usr/bin/env php
<?php

use Ronanchilvers\Db\Console\Command\GenerateCommand;
use Ronanchilvers\Db\Model;
use Ronanchilvers\Db\Schema\SchemaFactory;
use Symfony\Component\Console\Application;

foreach ([__DIR__ . '/../autoload.php', __DIR__ . '/../vendor/autoload.php', __DIR__ . '/../../../autoload.php'] as $file) {
    if (file_exists($file)) {
        include($file);
        break;
    }
}

$pdo = new PDO(
    'mysql:host=127.0.0.1;port=3306;dbname=db_test',
    'dev',
    'dev'
);

$app = new Application('ronanchilvers/db');
$app->add(
    new GenerateCommand(
        (new SchemaFactory())->factory($pdo)
    )
);
$app->run();
